bluemix-wordpress
=================

<h4>WordPress is a <a href="http://en.wikipedia.org/wiki/Free_and_open_source" target="_new">free and open source</a> <a href="http://en.wikipedia.org/wiki/Blog" target="_new">blogging</a> tool and a <a href="http://en.wikipedia.org/wiki/Content_management_system" target="_new">content management system</a> (CMS) based on <a href="http://en.wikipedia.org/wiki/PHP" target="_new">PHP</a> and <a href="http://en.wikipedia.org/wiki/MySQL" target="_new">MySQL</a> which runs on a <a href="http://en.wikipedia.org/wiki/Web_hosting_service" target="_new">web hosting service</a>. Features include a plug-in architecture and a template system. WordPress is completely customizable and can be used for almost anything. You can use Wordpress as a foundation of your web application to call social data APIs. In order to have Wordpress work on the IBM codename: BlueMix Platform, do the following:</h4><ol><ol><li>Download a current stable version of Wordpress from <a href="http://wordpress.org/download/" target="_new">http://wordpress.org/download/</a>.</li><li>Untar or unzip the download and change to the base directory, usually "wordpress".</li><li>WordPress Security Keys are a set of random variables that improve encryption of information stored in the user’s cookies. Self-hosted WordPress deploys do not have the Security Keys defined by default. When you create and use a set of random variables, you're changing the way that WordPress encrypts cookie data which in turn helps improve the security of the site.  We will populate a separate file called <strong>wp-salt.php</strong> with a set of random variables generated using the WordPress Online Salt Generator found @ <a href="https://api.wordpress.org/secret-key/1.1/salt/" title="Online WordPress Security Key Salt generator" target="_blank">https://api.wordpress.org/secret-key/1.1/salt/</a> and then require its inclusion within the wp-config.php file.</li><li>From the base directory (e.g. "wordpress"), run<br /><pre>#Create a file named wp-salt.php and append it with the string <strong>&lt;?php</strong> <br /><span style="color: #ffffff;">echo "&lt;?php" &gt; wp-salt.php<br /></span></pre></li><li>Followed by ....<br /><pre>#Fetch a series of automatically generated define statements and append it to the wp-salt.php file  <br /><span style="color: #ffffff;">curl https://api.wordpress.org/secret-key/1.1/salt/ &gt;&gt; wp-salt.php</span></pre></li><li>One of the most important files in a WordPress installation is the <tt>wp-config.php </tt>file. This file is located in the root of a WordPress file directory and contains the WordPress website's base configuration details, such as database connection information.  For the BlueMix platform, database connection information is dynamically generated during service instantiation and shared within environment variables.  Therefore, a config file structured to read the MySQL environment variable details is necessary. Insert or replace the <b><i>wp-config.php</i></b> within the WordPress directory with the one from <a href="https://github.com/ibmjstart/bluemix-php-frameworks/tree/master/wordpress" target="_new">this github repository</a>. <br /><br /></li><li>Using the <a href="https://github.com/cloudfoundry/cli/releases/tag/v6.0.0" title="Link to the Cloud Foundry v6 cli github repository binaries">cloud foundry v6 cli</a>, login to BlueMix and install Wordpress with a PHP buildpack.  <br />&lt;&lt;random number&gt;&gt; is user provided input.<br /><pre># Step 0: cf login -a &lt;api target url&gt; <br />$ <span style="color: #ffffff;">cf login -a https://api.ng.bluemix.net</span><br /># Step 1: cf create-service &lt;service name&gt; &lt;service plan type&gt; &lt;unique service instance name&gt;<br />$ <span style="color: #ffffff;">cf create-service mysql 100 mysql-wordpress-service</span><br /><br /># Step 2: cf push &lt;unique application name&gt; -b &lt;url to php buildpack&gt; --no-manifest (No manifest.yml present) --no-start (Don't start application after push)<br /># Buildpack choices:  <br />#  Basic - https://github.com/heroku/heroku-buildpack-php.git<br />#  ZLib Support (Gzip compression)- https://github.com/cyberdelia/heroku-buildpack-php.git
$ <span style="color: #ffffff;">cf push mysql-wordpress-&lt;&lt;random number&gt;&gt; -b https://github.com/heroku/heroku-buildpack-php.git --no-manifest --no-start</span><br /><br /># Step 3: cf bind-service &lt;unique application name used in Step 2&gt; &lt;service instance name used in Step 1&gt;<br />$ <span style="color: #ffffff;">cf bind-service mysql-wordpress-&lt;&lt;random number&gt;&gt; mysql-wordpress-service</span><br /><br /># Step 4: cf start &lt;unique application name used in Step 2&gt; (Start application)<br />$ <span style="color: #ffffff;">cf start mysql-wordpress-&lt;&lt;random number&gt;&gt;</span></pre></li><li>Once the push is finished, navigate to http://yourapp.ng.bluemix.net/wp-admin/install.php to set up wordpress.</li><li>That's it!.</li></ol></ol><h5 style="color: red;">Please note:  BlueMix does NOT provide persistent file storage. In order to have custom themes and plugins persist with your instance of Wordpress, you should save those themes and/or plugins within the application folder prior to pushing your application.<br /><br /><span style="text-decoration: underline; color: #000000;">FAQ<br /><br /></span><span style="color: #000000;">Q:  What does the text content look like when issuing the command </span>curl https://api.wordpress.org/secret-key/1.1/salt/</h5><h5 style="color: red;"><span style="color: #000000;">A:  Example.  Data collection changes with each subsequent refresh</span></h5><h5 style="color: red;"><span style="color: #000000;"><a href="https://www.ibmdw.net/bluemix/wp-content/uploads/sites/20/2014/02/WordPressSecretKeySaltExample.png"><img src="https://www.ibmdw.net/bluemix/wp-content/uploads/sites/20/2014/02/WordPressSecretKeySaltExample.png" alt="WordPressSecretKeySaltExample" width="766" height="192" class="aligncenter size-full wp-image-962" /><br /></a>Q:   BlueMix indicates that my application is running.  But I'm getting a blank page when browsing to the application route and I get a 404 "/install.php not found error".  When I look into BlueMix's stdout.log file, I see messages about a PHP Parse error:  syntax error, unexpected ' " '  (quote character).<a href="https://www.ibmdw.net/bluemix/wp-content/uploads/sites/20/2014/02/WordPressSaltPHPWithQuotesError.png"><br /></a></span></h5><p><img src="https://www.ibmdw.net/bluemix/wp-content/uploads/sites/20/2014/02/WordPressSaltPHPWithQuotesError-1024x543.png" alt="WordPressSaltPHPWithQuotesError" width="980" height="519" class="aligncenter size-large wp-image-989" /><a href="https://www.ibmdw.net/bluemix/wp-content/uploads/sites/20/2014/02/WordPressSaltPHPWithQuotesError.png"><br /><br /></a>A:  While rare, this can happen when double quote characters are inadvertently stored during the creation of wp-salt.php (Step #3).  Inspect the file and remove any double quote characters that may be wrapping the <strong>&lt;?php </strong>text in the first line.</p>
